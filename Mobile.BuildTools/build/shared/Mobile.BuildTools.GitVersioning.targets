<?xml version="1.0" encoding="utf-8" ?>
<Project>

  <UsingTask TaskName="Mobile.BuildTools.Tasks.GenerateGitReleaseNotesTask"
             AssemblyFile="$(_MobileBuildToolsParentBuildDirectory)/Mobile.BuildTools.dll"/>

  <Target Name="GenerateGitReleaseNotes"
          AfterTargets="CoreCompile"
          Condition=" '$(EnableReleaseNotes)' == 'true' And !Exists($([System.IO.Path]::Combine('$(BuildToolsArtifactOutputPath)', 'releasenotes.md'))) ">
    <PropertyGroup>
      <ReleaseNotesLookbackDays Condition=" '$(ReleaseNotesLookbackDays)' == '' ">7</ReleaseNotesLookbackDays>
      <ReleaseNotesLookbackCommits Condition=" '$(ReleaseNotesLookbackCommits)' == '' ">5</ReleaseNotesLookbackCommits>
      <ReleaseNotesCharacterLimit Condition=" '$(ReleaseNotesCharacterLimit)' == '' ">0</ReleaseNotesCharacterLimit>
    </PropertyGroup>
    <GenerateGitReleaseNotesTask OutputDirectory="$(BuildToolsArtifactOutputPath)"
                                 DateLookback="$(ReleaseNotesLookbackDays)"
                                 MaxCommit="$(ReleaseNotesLookbackCommits)"
                                 CharacterLimit="$(ReleaseNotesCharacterLimit)" />
  </Target>
  
</Project>