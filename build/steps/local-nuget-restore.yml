parameters:
  workingDirectory: ''
  version: '4.9.4'

steps:
- task: NuGetToolInstaller@0
  displayName: Use NuGet ${{ parameters.version }}
  inputs:
    versionSpec: ${{ parameters.version }}

- task: DownloadPipelineArtifact@1
  inputs:
    artifactName: 'Artifacts'
    downloadPath: $(Pipeline.Workspace)

- powershell: |
   Write-Host "Pipeline Workspace"
   cd $env:PIPELINE_WORKSPACE
   pwd
   ls
   Write-Host "Artifacts Directory"
   cd .\Artifacts
   pwd
   ls

- powershell: |
   nuget help | head -1 
   nuget locals global-packages -clear
   nuget restore -source "$($env:PIPELINE_WORKSPACE)\Artifacts;https://api.nuget.org/v3/index.json"

  workingDirectory: ${{ parameters.workingDirectory }}
  displayName: 'NuGet Restore'

